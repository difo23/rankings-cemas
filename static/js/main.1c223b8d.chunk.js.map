{"version":3,"sources":["components/ItemBoletin.js","components/ListaBoletines.js","hooks/useFetch.js","components/helpers/order-by-idx.js","components/helpers/get-idx-academico.js","components/helpers/get-idx-tecnico.js","components/helpers/get-idx-general.js","api/getReportsURL.js","components/SearchBar.js","hooks/useForm.js","App.js","reportWebVitals.js","index.js"],"names":["ItemBoletin","estudiante","useState","active","className","nombre_estudiante","numero_estudiante","asignaturas","map","asignatura","codigo_asignatura","modulos","modulo","idx_academico","idx_tecnico","idx_general","ListaBoletines","url","console","log","isMounted","useRef","data","loading","error","state","setState","useEffect","current","fetch","then","resp","json","catch","useFetch","ranking","sort","a","b","orderByIdx","filter","dato","length","idxTecnico","idxAcademico","Math","random","_id","getReportsURL","curso","periodo","string_params","encodeURI","SearchBar","handleUrl","initialState","values","setValues","target","name","value","useForm","formValues","handleInputChange","reset","onSubmit","e","preventDefault","info","type","placeholder","onChange","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1c223b8d.chunk.js","sourcesContent":["import React, { useState } from 'react'\n\nexport default function ItemBoletin({ estudiante }) {\n\n    const [active, setactive] = useState('')\n\n    return (\n        <div>\n            <li className={`list-group-item list-group-item-action ${active}`}>\n                <div className=\"d-flex w-100 justify-content-between\">\n                    <h5 className=\"mb-1\">{estudiante.nombre_estudiante}</h5>\n                    <small>{estudiante.numero_estudiante}</small>\n                </div>\n                <p className=\"mb-1\"> Asignaturas: {estudiante.asignaturas.map(asignatura => <small>{asignatura.codigo_asignatura} </small>)}</p>\n\n                <p className=\"mb-1\"> Modulos: {estudiante.modulos.map(modulo => <small>{modulo.codigo_asignatura} </small>)}</p>\n\n\n\n                <p className=\"mb-1\"> {`Promedio Academico : ${estudiante.idx_academico}`} </p>\n                <p className=\"mb-1\"> {`Promedio Tecnico : ${estudiante.idx_tecnico}`} </p>\n                <p className=\"mb-1\"> {`Promedio General : ${estudiante.idx_general}`} </p>\n\n                {/* <small>Titular: {estudiante.nombre_titular}</small> */}\n                {/* <div className=\"mt-3\">\n                    <button className=\"btn btn-outline-success \" >Buscar</button>\n\n                </div> */}\n            </li>\n        </div>\n    )\n}\n","import { useFetch } from \"../hooks/useFetch\";\nimport ItemBoletin from \"./ItemBoletin\";\nimport {\n    getIdxAcademico,\n    getIdxGeneral,\n    getIdxTecnico,\n    orderByIdx\n} from \"./helpers\";\n\nexport default function ListaBoletines({ url }) {\n\n    console.log(\"Lista Boletines URL: \", url);\n    //{ data: null, loading: true, error: null }\n\n    const { data, loading, error } = useFetch(url);\n\n    if (loading && url) {\n\n        return <h1>Loading</h1>\n    } else if (error) {\n        console.log(error);\n        return <h3>{error}</h3>\n    }\n\n\n\n    console.log(\"Datos: \", data)\n\n    // Algoritmo de ranking sobre data\n    const algoritmoRanking = (json) => {\n\n        const valid = json.data.filter(dato => (dato.asignaturas.length > 2));\n\n        const ranking_desorder = valid.map(estudiante => {\n\n\n            //obtener idx_academico\n            const idx_academico = getIdxAcademico(estudiante?.asignaturas);\n\n            //obtener idx_tecnico\n            const idx_tecnico = getIdxTecnico(estudiante?.modulos);\n\n            //obtener idx_general\n            const idx_general = getIdxGeneral(idx_tecnico, idx_academico);\n\n            return {\n                ...estudiante,\n                idx_academico,\n                idx_tecnico,\n                idx_general\n            }\n\n        })\n\n\n        const ranking_order = orderByIdx(ranking_desorder);\n\n        return ranking_order;\n    }\n\n    //llamo el algoritmo\n\n    const ranking = algoritmoRanking(data);\n\n\n    return (\n        <div>\n            <div className=\"list-group\">\n                {ranking.map(estudiante => <ItemBoletin key={estudiante._id} estudiante={estudiante} />)}\n\n            </div>\n        </div>\n    )\n}\n","\nimport { useState, useEffect, useRef } from 'react';\n\n\nexport const useFetch = (url) => {\n\n    const isMounted = useRef(true);\n    const [state, setState] = useState({ data: null, loading: true, error: null });\n\n    useEffect(() => {\n        return () => {\n            isMounted.current = false;\n        }\n    }, [])\n\n\n    useEffect(() => {\n\n        setState({ data: null, loading: true, error: null });\n\n        fetch(url)\n            .then(resp => resp.json())\n            .then(data => {\n\n                if (isMounted.current) {\n                    setState({\n                        loading: false,\n                        error: null,\n                        data\n                    });\n                }\n\n            })\n            .catch(() => {\n                setState({\n                    data: null,\n                    loading: false,\n                    error: 'No se pudo cargar la info'\n                })\n            })\n\n    }, [url])\n\n    return state;\n}\n\n\n\n/**\n * # useFetch\n\nEjemplo:\n```\n    const url = 'endpoint de una api';\n    const { data: null, loading: true, error: null } = useFetch(url);\n\n```\n */","export default function orderByIdx(ranking) {\n\n    return ranking.sort(function (a, b) {\n        if (a.idx_general < b.idx_general) {\n            return 1;\n        }\n        if (a.idx_general > b.idx_general) {\n            return -1;\n        }\n        // a must be equal to b\n        return 0;\n    });\n\n}","\n\nexport default function getIdxAcademico(asignaturas) {\n\n  console.log('getIdxAcademico', asignaturas);\n\n  // Calcular idx academico\n\n  /**\n   * Ejemplo  de los elementos dentro de asignaturas:\n   * {\n        \"codigo_asignatura\": \"EDAR004\",\n        \"ago_sept_oct\": \"83\",\n        \"nov_dic_ene\": \"0\",\n        \"feb_mar\": \"0\",\n        \"abr_may_jun\": \"0\",\n        \"cf\": 21\n      }\n   */\n\n  /**\n   * Formula:\n    idx_academico = (sum_cf_asignaturas)/ (asignaturas_length)\n   */\n\n  if (asignaturas) {\n    //Calculamos index con asignaturas\n\n    return 93.9042;\n  } else {\n\n    // Return 0 si asignaturas es null o []\n    return 0;\n  }\n\n}","\n\nexport default function getIdxTecnico(modulos) {\n\n    // Calcular idx tecnico\n\n    console.log('getIdxTecnico', modulos);\n\n    /**\n     * Ejemplo  de los elementos dentro de modulos:\n     * {\n          \"codigo_asignatura\": \"MF3623_GDD\",\n          \"acumulado\": 23,\n          \"total\": 25\n        }\n     */\n\n    /**\n     * Formula:\n     * \n     * Para 4to y 5to: \n        calculo en idx directamente con la formula:\n\n        idx_tecnico = (sum_acumulado_modulos)/ (modulos_length)\n     \n    * Para 6to:\n        Es necesario aplicar regla de 3 al acumulado de la asignatura\n        Formacion de Centros de trabajos (FCT), su codigo asignatura es MF0000_FCT.\n\n        Ejemplo 6A:\n        {\n          \"codigo_asignatura\": \"MF0000_FCT\",\n          \"acumulado\": 26,\n          \"total\": 30\n        },\n\n\n        fct_transformada = (fct_acumulado * 100) / (fct_total)\n\n        Luego actualizo el valor de fct_acumulado por el nuevo valor transformado.\n\n        fct_acumulado = fct_transformado\n\n        Y calculo el indice tecnico: \n\n        idx_tecnico = (sum_acumulado_modulos)/ (modulos_length)\n\n     */\n\n\n    if (modulos) {\n\n        // Calcular el indice \n\n\n        return 93.8842;\n\n    } else {\n\n        // Si modulos es null o [] retorna 0\n        // Esto sucede cuando no son cursos tecnicos\n        return 0;\n    }\n\n\n}","\n\n\nexport default function getIdxGeneral(idxTecnico, idxAcademico) {\n\n    console.log('getIdxAcademica', idxTecnico, idxAcademico)\n    // Calcular idx general \n    /**\n     * Formula si existe calificacion tecnica\n     * idx_general = (idx_tecnico + idx_academico)/ 2\n     * Si idxTecnico es 0 solo retornamos el idxAcademico\n     */\n\n    if (idxTecnico) {\n\n        // Calculamos idx general con promedio de academica y tecnica\n        // Uso valores random solo para probar el ordernamiento\n        return 99.4567 * Math.random();\n    } else {\n\n        return idxAcademico\n    }\n\n\n}","const getReportsURL = (curso, periodo) => {\n\n\t/**\n\t * @description: Obtener todos los reportes por curso y periodo. \n\t * @param\t{String}\tcurso Ejemplo: \"4A\"\n\t * @param\t{String}\tPeriodo Ejemplo: \"2020-2021\"\n\t * @URL https://cemasapi.herokuapp.com/reportes/boletin/4A:2020-2021:\n\t * @return  {String}\tURL\t String URL .\n\t */\n\n\n\tconst url = `/reportes`;\n\tlet string_params = `/boletin/${curso}:${periodo}:`;\n\tconst URL_API = 'https://cemasapi.herokuapp.com';\n\n\n\tconst urlComplete = `${URL_API}${url}${encodeURI(string_params)}`;\n\treturn urlComplete;\n};\n\nexport default getReportsURL;","import React from 'react'\nimport getReportsURL from '../api/getReportsURL';\nimport { useForm } from '../hooks/useForm'\n\nexport default function SearchBar({ handleUrl }) {\n\n    const initialForm = {\n        curso: '',\n        periodo: ''\n    };\n\n\n    const [formValues, handleInputChange, reset] = useForm(initialForm);\n\n    const { curso, periodo } = formValues;\n\n\n    const loadRecords = (e) => {\n        e.preventDefault();\n        console.info(\"Form Values: \", curso, periodo);\n\n        const url = getReportsURL(curso, periodo);\n        console.info(\"URL: \", url);\n\n        handleUrl(url);\n        reset();\n\n    }\n\n    return (\n        <div>\n            <form onSubmit={loadRecords}>\n                <div className=\"form-row ml-5\">\n                    <div className=\"col-5\">\n                        <input\n                            type=\"text\"\n                            className=\"form-control\"\n                            placeholder=\"Curso\"\n                            name=\"curso\"\n                            value={curso}\n                            onChange={handleInputChange}\n                        />\n                    </div>\n                    <div className=\"col-5\">\n                        <input\n                            type=\"text\"\n                            className=\"form-control\"\n                            placeholder=\"Periodo\"\n                            name=\"periodo\"\n                            value={periodo}\n                            onChange={handleInputChange}\n                        />\n                    </div>\n                    <div className=\"col-2\">\n                        <button className=\"btn btn-outline-success \" type=\"submit\">Buscar</button>\n                    </div>\n                </div>\n            </form>\n        </div>\n    )\n}\n","import { useState } from \"react\"\n\n\nexport const useForm = (initialState = {}) => {\n   \n\n    const [values, setValues] = useState(initialState);\n\n    const reset = () => {\n        setValues(initialState);\n    }\n\n\n    const handleInputChange = ({ target }) => {\n\n        setValues({\n            ...values,\n            [target.name]: target.value\n        });\n\n    }\n\n    return [values, handleInputChange, reset];\n\n}\n\n\n /*\n        # useForm\n\n        Ejemplo:\n\n            const initialForm = {\n                name: '',\n                age: 0,\n                email: ''\n            };\n            \n        const [ formValues, handleInputChange, reset ] = useForm( initialForm );\n    */","\n\nimport { useState } from 'react';\nimport ListaBoletines from './components/ListaBoletines';\nimport SearchBar from './components/SearchBar';\n\nfunction App() {\n\n  const [state, setState] = useState(null)\n\n  console.log(state)\n  const handleUrl = (url) => {\n    setState(url)\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row mt-4\">\n\n        <div className=\"col\">\n          <h1>Ranking:</h1>\n          <hr />\n        </div>\n\n      </div>\n\n      <div className=\"row mt-4\">\n        <div className=\"col\">\n          <SearchBar handleUrl={handleUrl} />\n        </div>\n      </div>\n\n      <div className=\"row mt-4\">\n        <div className=\"col mt-4 ml-5 mr-5 mb-5\">\n          <h3>Lista de boletines:</h3>\n          <hr />\n          {state && <ListaBoletines url={state} />}\n        </div>\n      </div>\n\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}